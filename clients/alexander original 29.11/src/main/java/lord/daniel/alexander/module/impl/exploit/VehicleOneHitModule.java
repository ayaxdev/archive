package lord.daniel.alexander.module.impl.exploit;

import io.github.nevalackin.homoBus.Listener;
import io.github.nevalackin.homoBus.annotations.EventLink;
import lord.daniel.alexander.event.impl.game.AttackEvent;
import lord.daniel.alexander.module.abstracts.AbstractModule;
import lord.daniel.alexander.module.data.ModuleData;
import lord.daniel.alexander.module.enums.EnumModuleType;
import net.minecraft.entity.item.EntityBoat;
import net.minecraft.entity.item.EntityMinecart;
import net.minecraft.network.play.client.C02PacketUseEntity;
import net.minecraft.network.play.client.C0APacketAnimation;

/**
 * Written by 'Daniel.' for Alexander client.
 * Please don't use the code.
 *
 * @author Daniel.
 */
@ModuleData(name = "VehicleOneHit", enumModuleType = EnumModuleType.EXPLOIT)
public class VehicleOneHitModule extends AbstractModule {

    @EventLink
    public final Listener<AttackEvent> attackEventListener = attackEvent -> {
        if(attackEvent.getAttacking() instanceof EntityBoat || attackEvent.getAttacking() instanceof EntityMinecart) {
            for(int i = 0; i < 4; i++) {
                sendPacketUnlogged(new C0APacketAnimation());
                sendPacketUnlogged(new C02PacketUseEntity(attackEvent.getAttacking(), C02PacketUseEntity.Action.ATTACK));
            }
        }
    };

    @Override
    public void onEnable() {

    }

    @Override
    public void onDisable() {

    }
}
